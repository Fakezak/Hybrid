<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hybrid App</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- MODAL LOGIN -->
<div id="modal" class="modal">
  <div class="modal-content" id="modalContent">
    <div id="welcomeStep">
      <p>Welcome to Hybrid!</p>
      <button id="startBtn">Start</button>
    </div>
    <div id="instructionsStep" class="hidden">
      <div id="slides">
        <div>Swipe 1: Chats → Click + to message anyone</div>
        <div>Swipe 2: Store → Buy themes & styles</div>
        <div>Swipe 3: Profile → Customize your account</div>
      </div>
      <button id="nextInstrBtn">Next</button>
    </div>
    <div id="authStep" class="hidden">
      <div id="loginForm">
        <h2>Login</h2>
        <input type="text" id="loginUsername" placeholder="Username">
        <input type="password" id="loginPassword" placeholder="Password">
        <button id="loginBtn">Login</button>
        <p>Don't have an account? <span id="gotoSignUp">Sign Up</span></p>
      </div>
      <div id="signupForm" class="hidden">
        <h2>Sign Up</h2>
        <input type="text" id="signupUsername" placeholder="Username">
        <input type="password" id="signupPassword" placeholder="Password">
        <button id="signupBtn">Register</button>
        <p>Already have an account? <span id="gotoLogin">Login</span></p>
      </div>
    </div>
  </div>
</div>

<!-- MAIN SWIPE AREA -->
<div id="mainSwipe" class="swipe-container hidden">

  <!-- CHATS PAGE -->
  <div class="swipe-page" id="chatsPage">
    <div class="page-header">Chats <button id="newChat">+</button></div>
    <div id="chatList"></div>
    <div id="chatBox"></div>
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button id="sendBtn">Send</button>
  </div>

  <!-- STORE PAGE -->
  <div class="swipe-page" id="storePage">
    <div class="page-header">Store</div>
    <div id="storeItems"></div>
  </div>

  <!-- PROFILE PAGE -->
  <div class="swipe-page" id="profilePage">
    <div class="page-header">Profile</div>
    <img id="profilePic" src="default.png" class="profile-circle">
    <input type="text" id="displayName" placeholder="Display Name">
    <p>Followers: <span id="followers">1.1B</span></p>
    <p>Following: <span id="following">1.1B</span></p>
    <p>Likes: <span id="likes">1.1B</span></p>
    <button id="saveProfileBtn">Save Profile</button>

    <div id="postBox">
      <textarea id="postContent" placeholder="Write something..."></textarea>
      <input type="text" id="postHashtags" placeholder="Add hashtags #...">
      <button id="postBtn">Post</button>
    </div>
    <div id="posts"></div>

    <button id="goLive">Go Live</button>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>        <div>Swipe 2: Store → Buy themes & styles</div>
        <div>Swipe 3: Profile → Customize your account</div>
      </div>
      <button id="nextInstrBtn">Next</button>
    </div>
    <div id="authStep" class="hidden">
      <div id="loginForm">
        <h2>Login</h2>
        <input type="text" id="loginUsername" placeholder="Username">
        <input type="password" id="loginPassword" placeholder="Password">
        <button id="loginBtn">Login</button>
        <p>Don't have an account? <span id="gotoSignUp">Sign Up</span></p>
      </div>
      <div id="signupForm" class="hidden">
        <h2>Sign Up</h2>
        <input type="text" id="signupUsername" placeholder="Username">
        <input type="password" id="signupPassword" placeholder="Password">
        <button id="signupBtn">Register</button>
        <p>Already have an account? <span id="gotoLogin">Login</span></p>
      </div>
    </div>
  </div>
</div>

<!-- MAIN SWIPE AREA -->
<div id="mainSwipe" class="swipe-container hidden">
  <!-- CHATS PAGE -->
  <div class="swipe-page" id="chatsPage">
    <div class="page-header">Chats <button id="newChat">+</button></div>
    <div id="chatList"></div>
    <div id="chatBox"></div>
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button id="sendBtn">Send</button>
  </div>

  <!-- STORE PAGE -->
  <div class="swipe-page" id="storePage">
    <div class="page-header">Store</div>
    <div id="storeItems"></div>
  </div>

  <!-- PROFILE PAGE -->
  <div class="swipe-page" id="profilePage">
    <div class="page-header">Profile</div>
    <img id="profilePic" src="default.png" class="profile-circle">
    <input type="text" id="displayName" placeholder="Display Name">
    <p>Balance: $<span id="balance">0</span></p>
    <button id="saveProfileBtn">Save Profile</button>
  </div>
</div>

<script>
/* Local Storage Setup */
if(!localStorage.getItem("users")) localStorage.setItem("users","[]");
if(!localStorage.getItem("chats")) localStorage.setItem("chats","[]");

/* MODAL LOGIC */
document.getElementById("startBtn").onclick = ()=>{
  document.getElementById("welcomeStep").classList.add("hidden");
  document.getElementById("instructionsStep").classList.remove("hidden");
};
document.getElementById("nextInstrBtn").onclick = ()=>{
  document.getElementById("instructionsStep").classList.add("hidden");
  document.getElementById("authStep").classList.remove("hidden");
};

/* LOGIN / SIGNUP TOGGLE */
document.getElementById("gotoSignUp").onclick = ()=>{
  document.getElementById("loginForm").classList.add("hidden");
  document.getElementById("signupForm").classList.remove("hidden");
};
document.getElementById("gotoLogin").onclick = ()=>{
  document.getElementById("signupForm").classList.add("hidden");
  document.getElementById("loginForm").classList.remove("hidden");
};

/* SIGNUP */
document.getElementById("signupBtn").onclick = ()=>{
  const username = document.getElementById("signupUsername").value;
  const password = document.getElementById("signupPassword").value;
  let users = JSON.parse(localStorage.getItem("users"));
  if(users.find(u=>u.username===username)){ alert("User exists!"); return; }
  users.push({username,password,balance:1,displayName:"",profilePic:"default.png"});
  localStorage.setItem("users",JSON.stringify(users));
  alert("Registered! Login now");
  document.getElementById("signupForm").classList.add("hidden");
  document.getElementById("loginForm").classList.remove("hidden");
};

/* LOGIN */
document.getElementById("loginBtn").onclick = ()=>{
  const username = document.getElementById("loginUsername").value;
  const password = document.getElementById("loginPassword").value;
  let users = JSON.parse(localStorage.getItem("users"));
  const user = users.find(u=>u.username===username && u.password===password);
  if(user){
    localStorage.setItem("currentUser",JSON.stringify(user));
    document.getElementById("modal").classList.add("hidden");
    document.getElementById("mainSwipe").classList.remove("hidden");
    loadProfile();
    loadStore();
    loadChats();
  } else alert("Invalid login");
};

/* PROFILE */
function loadProfile(){
  const user = JSON.parse(localStorage.getItem("currentUser"));
  document.getElementById("profilePic").src = user.profilePic;
  document.getElementById("displayName").value = user.displayName;
  document.getElementById("balance").innerText = user.balance;
}
document.getElementById("saveProfileBtn").onclick = ()=>{
  const user = JSON.parse(localStorage.getItem("currentUser"));
  user.displayName = document.getElementById("displayName").value;
  localStorage.setItem("currentUser",JSON.stringify(user));
  alert("Profile Saved!");
};

/* STORE */
function loadStore(){
  const store = [
    {id:1,name:"Red Theme",price:5},
    {id:2,name:"Cool Sticker",price:2}
  ];
  const container = document.getElementById("storeItems");
  container.innerHTML="";
  store.forEach(item=>{
    const div=document.createElement("div");
    div.className="store-item";
    div.innerHTML=`<span>${item.name} - $${item.price}</span><button onclick="buyItem(${item.id})">Buy</button>`;
    container.appendChild(div);
  });
}
function buyItem(id){
  let user = JSON.parse(localStorage.getItem("currentUser"));
  const item = id===1 ? {price:5} : {price:2};
  if(user.balance>=item.price){
    user.balance-=item.price;
    localStorage.setItem("currentUser",JSON.stringify(user));
    document.getElementById("balance").innerText=user.balance;
    alert("Item bought!");
  } else alert("Not enough balance!");
}

/* CHATS */
function loadChats(){
  const chatList=document.getElementById("chatList");
  chatList.innerHTML="";
  const users = JSON.parse(localStorage.getItem("users"));
  users.forEach(u=>{
    const div=document.createElement("div");
    div.textContent=u.username;
    div.onclick=()=>openChat(u.username);
    chatList.appendChild(div);
  });
}
function openChat(username){
  const chatBox=document.getElementById("chatBox");
  chatBox.innerHTML="";
  const chats=JSON.parse(localStorage.getItem("chats"));
  chats.filter(c=>c.to===username||c.from===username).forEach(m=>{
    const div=document.createElement("div");
    div.className="message "+(m.from===JSON.parse(localStorage.getItem("currentUser")).username?"self":"other");
    div.textContent=m.text;
    chatBox.appendChild(div);
  });
  document.getElementById("sendBtn").onclick=()=>{
    const input=document.getElementById("chatInput");
    const text=input.value;
    if(!text) return;
    chats.push({from:JSON.parse(localStorage.getItem("currentUser")).username,to:username,text});
    localStorage.setItem("chats",JSON.stringify(chats));
    input.value="";
    loadChats();
    openChat(username);
  };
}
</script>
</body>
</html>
